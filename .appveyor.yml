version: 1.0.{build}
os: Windows Server 2012 R2
platform: x86
configuration:
  - Release
  - Debug
install:
  - SET PATH=C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC;%PATH%
  - vcvarsall
before_build:
  - mkdir build
  - cd build
  - git clone --quiet https://github.com/Biomechanical-ToolKit/BTKData.git Testing/Data
  - cmake -DCMAKE_BUILD_TYPE:CHAR=$(configuration) -DBUILD_SHARED_LIBS:BOOL=1 -DBUILD_TESTING:BOOL=1 -DBTK_TESTING_DATA_PATH:CHAR=C:\projects\btkcore\Testing\Data -G "NMake Makefiles" ..
build_script:
  - echo "BUILD INFO: MSVC / $(configuration) / $(platform)"
  - nmake
test_script:
  - ctest -VV